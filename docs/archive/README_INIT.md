# ğŸš€ Rumah Plagiasi - Complete Setup

Modern document bypass system dengan Next.js frontend dan Python FastAPI backend. **One-command initialization!**

âš¡ **Created by devnolife**

---

## âš¡ Quick Start (Recommended)

The **fastest** way to get started:

```bash
# Clone or navigate to project
cd vision-computer

# Run ONE command to setup everything
./init.sh

# Start backend
./start_production.sh

# Start frontend (in new terminal)
cd frontend && npm run dev

# Access: http://localhost:3000
```

**That's it!** ğŸ‰ Everything is configured automatically including:
- âœ… Secure API key generation
- âœ… Backend `.env` configuration
- âœ… Frontend `.env` configuration
- âœ… All dependencies installed
- âœ… Database setup (Prisma)
- âœ… Directory structure created

---

## ğŸ“– Detailed Documentation

For detailed setup and usage, see:

- **[QUICK_START.md](QUICK_START.md)** - Complete quick start guide
- **[API_KEY_SETUP.md](API_KEY_SETUP.md)** - API key authentication
- **[frontend/README.md](frontend/README.md)** - Frontend documentation

---

## ğŸ¯ What Does init.sh Do?

The initialization script automates the entire setup process:

### 1. Prerequisites Check
- Verifies Python 3.8+
- Verifies Node.js 18+
- Verifies npm
- Checks for Redis (optional)
- Checks for PostgreSQL (optional)

### 2. Security Setup
- Generates cryptographically secure API key (64 characters)
- Creates backend `.env` with API_KEY
- Creates frontend `.env` with PYTHON_API_KEY (same key)
- Ensures both apps can communicate securely

### 3. Dependency Installation
- Installs Python packages from requirements.txt
- Installs Node.js packages from frontend/package.json
- Sets up Prisma Client

### 4. Database Setup
- Generates Prisma Client
- Pushes database schema
- Creates necessary tables

### 5. Directory Structure
- Creates `uploads/` for uploaded files
- Creates `outputs/` for processed files
- Creates `temp/` for temporary files
- Creates `logs/` for application logs
- Creates `pids/` for process IDs

### 6. Verification
- Validates all configurations
- Checks API key consistency
- Verifies directory structure
- Displays comprehensive summary

---

## ğŸ—ï¸ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   init.sh (One Command)                  â”‚
â”‚                                                          â”‚
â”‚  1. Check Prerequisites                                  â”‚
â”‚  2. Generate API Key: apk_abc123...                      â”‚
â”‚  3. Setup Backend .env with API_KEY                      â”‚
â”‚  4. Setup Frontend .env with PYTHON_API_KEY (same key)   â”‚
â”‚  5. Install Python dependencies                          â”‚
â”‚  6. Install Node.js dependencies                         â”‚
â”‚  7. Setup Prisma database                                â”‚
â”‚  8. Create directories                                   â”‚
â”‚  9. Verify everything                                    â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                        â”‚
        â†“                                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend (Port 8000)â”‚                 â”‚ Frontend (Port 3000)â”‚
â”‚                   â”‚                  â”‚                     â”‚
â”‚ .env:             â”‚                  â”‚ .env:               â”‚
â”‚   API_KEY=apk_... â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   PYTHON_API_KEY=   â”‚
â”‚                   â”‚   Same API Key   â”‚     apk_...         â”‚
â”‚ FastAPI + Celery  â”‚                  â”‚ Next.js + Prisma    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Project Structure

```
vision-computer/
â”œâ”€â”€ init.sh                    # ğŸ”¥ ONE-COMMAND SETUP SCRIPT
â”œâ”€â”€ generate_api_key.py        # API key generator
â”œâ”€â”€ start_production.sh        # Start backend services
â”œâ”€â”€ stop_production.sh         # Stop backend services
â”œâ”€â”€ restart_production.sh      # Restart backend services
â”œâ”€â”€ status_production.sh       # Check service status
â”œâ”€â”€ pm2-like.sh                # PM2-like manager
â”‚
â”œâ”€â”€ .env                       # âœ… Auto-generated by init.sh
â”œâ”€â”€ .env.example               # Environment template
â”‚
â”œâ”€â”€ app/                       # Python FastAPI application
â”‚   â”œâ”€â”€ main.py                # FastAPI app
â”‚   â”œâ”€â”€ middleware/            # API key middleware
â”‚   â”œâ”€â”€ bypass_engine.py       # Bypass processing
â”‚   â”œâ”€â”€ content_analyzer.py    # Document analysis
â”‚   â””â”€â”€ tasks.py               # Celery tasks
â”‚
â”œâ”€â”€ uploads/                   # âœ… Auto-created by init.sh
â”œâ”€â”€ outputs/                   # âœ… Auto-created by init.sh
â”œâ”€â”€ temp/                      # âœ… Auto-created by init.sh
â”œâ”€â”€ logs/                      # âœ… Auto-created by init.sh
â”œâ”€â”€ pids/                      # âœ… Auto-created by init.sh
â”‚
â””â”€â”€ frontend/                  # Next.js application
    â”œâ”€â”€ .env                   # âœ… Auto-generated by init.sh
    â”œâ”€â”€ package.json           # Node dependencies
    â”œâ”€â”€ prisma/
    â”‚   â””â”€â”€ schema.prisma      # Database schema
    â”œâ”€â”€ app/                   # Next.js App Router
    â”œâ”€â”€ components/            # React components
    â””â”€â”€ lib/
        â”œâ”€â”€ prisma.ts          # Prisma client
        â””â”€â”€ api/
            â””â”€â”€ python-client.ts # Python API integration
```

---

## ğŸ” API Key Authentication

After running `init.sh`, both backend and frontend will have the **same API key** configured automatically:

### Backend (.env)
```env
API_KEY=apk_GeneratedKey123...
```

### Frontend (frontend/.env)
```env
PYTHON_API_KEY=apk_GeneratedKey123...
```

This ensures secure communication between Next.js and Python API. All requests require the `X-API-Key` header.

For more details, see [API_KEY_SETUP.md](API_KEY_SETUP.md)

---

## ğŸ¬ Usage Examples

### Initialize Project
```bash
./init.sh
```

### Start Services
```bash
# Option 1: Production mode
./start_production.sh

# Option 2: PM2-like manager
./pm2-like.sh start

# Option 3: Development mode
uvicorn app.main:app --reload
```

### Check Status
```bash
./status_production.sh
# or
./pm2-like.sh status
```

### View Logs
```bash
./pm2-like.sh logs
# or
tail -f logs/*.log
```

### Stop Services
```bash
./stop_production.sh
# or
./pm2-like.sh stop
```

### Restart Services
```bash
./restart_production.sh
# or
./pm2-like.sh restart
```

---

## ğŸ§ª Testing

### Test Backend Health
```bash
curl http://localhost:8000/health
```

### Test API with Authentication
```bash
# Get API key from .env
API_KEY=$(grep "^API_KEY=" .env | cut -d'=' -f2)

# Test authenticated endpoint
curl http://localhost:8000/config/strategies \
  -H "X-API-Key: $API_KEY"
```

### Test Frontend
```bash
# Open browser
open http://localhost:3000
```

---

## ğŸ”§ Manual Setup (Alternative)

If you prefer manual setup instead of using `init.sh`:

### 1. Generate API Key
```bash
python generate_api_key.py
```

### 2. Configure Backend
```bash
cp .env.example .env
# Edit .env and add API_KEY
```

### 3. Configure Frontend
```bash
cd frontend
cp .env.example .env
# Edit .env and add PYTHON_API_KEY (same as backend API_KEY)
```

### 4. Install Dependencies
```bash
# Backend
pip install -r requirements.txt

# Frontend
cd frontend
npm install
```

### 5. Setup Database
```bash
cd frontend
npx prisma generate
npx prisma db push
```

### 6. Create Directories
```bash
mkdir -p uploads outputs temp logs pids
```

---

## ğŸ“Š Features

### Backend (Python FastAPI)
- âœ… Document bypass processing (multiple strategies)
- âœ… Document analysis & flag detection
- âœ… OCR processing for PDFs
- âœ… Celery task queue for async processing
- âœ… Redis for caching and message broker
- âœ… API key authentication
- âœ… Swagger/ReDoc documentation

### Frontend (Next.js)
- âœ… Modern UI with Shadcn components
- âœ… Prisma ORM for database
- âœ… NextAuth.js for authentication
- âœ… User management
- âœ… Document management
- âœ… Bypass history & analytics
- âœ… Real-time progress tracking
- âœ… Python API integration

---

## ğŸš€ Deployment

### Development
```bash
./init.sh
./start_production.sh
cd frontend && npm run dev
```

### Production
1. Run `init.sh` with production settings
2. Setup reverse proxy (Nginx)
3. Use PM2 for process management
4. Setup SSL certificates
5. Configure production database
6. Enable monitoring & logging

---

## ğŸ› Troubleshooting

See [QUICK_START.md](QUICK_START.md#troubleshooting) for common issues and solutions.

---

## ğŸ“š Documentation

- **[QUICK_START.md](QUICK_START.md)** - Complete setup guide
- **[API_KEY_SETUP.md](API_KEY_SETUP.md)** - API authentication
- **[frontend/README.md](frontend/README.md)** - Frontend documentation
- **API Docs** - http://localhost:8000/docs (after starting backend)

---

## ğŸ¤ Contributing

1. Fork the repository
2. Create feature branch
3. Implement feature with tests
4. Run linter and tests
5. Submit pull request

---

## ğŸ“„ License

Private - Created by devnolife

---

## ğŸ’¡ Support

For questions or issues:
- Read documentation
- Check troubleshooting guide
- Open an issue

---

âš¡ **Made with â¤ï¸ by devnolife**

**Remember:** Just run `./init.sh` and you're ready to go! ğŸš€
